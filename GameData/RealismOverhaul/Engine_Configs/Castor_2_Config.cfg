//  ===============================================================
//  Castor 2 Solid Rocket Motor
//  Bluedog_DB, Ven Stock Revamp
//
//  Manufacturer: Thiokol
//  Diameter: 0.79 m
//  Dry Mass: 677.2129 kg
//
//  Thrust: 270.29164 vac (that is the average, 330 is the maxThrust with the thrustCurve)
//  ISP: 282.2 vac
//  Burn Time: 39.29 s
//  Propellant Mass: 3723.99 kg (changed to 3600 for proper burn time)
//  
//  Nozzle Expansion Ratio: 21.2
//  Nozzle Exit Area: 2.471928 m^2
//
//  Sources:
//    NASA CR-165950 Scout Launch Vehicle Final Report.PDF
//    NASA CR-145136 Scout Nozzle Data Book (1976): https://ntrs.nasa.gov/archive/nasa/casi.ntrs.nasa.gov/19770010201.pdf
//      Thrust Misalignments of Fixed Solid Rocket Motors: http://rsandt.com/media/Thrust%20Misalignments%20of%20Fixed-Nozzle%20Solid%20Rocket%20Motors.pdf
//      The Satellite Encyclopedia - Castor Series:        https://www.tbs-satellite.com/tse/online/lanc_castor.html
//
//  ===============================================================

@PART[*]:HAS[#engineType[Castor-2]]:FOR[RealismOverhaulEngines]
{
	%category = Engine
	%title = Castor 2
	%manufacturer = Thiokol
	%description = A derivative of the Castor 1 motor, the Castor 2 featured higher specific impulse and propellant load and lower dry mass fraction as well as a longer burn time. It was used as strap-on booster starting with Delta E and was also used in all but the early Scouts. Burn time 39s. Diameter: [0.79 m].

	@MODULE[ModuleEngines*]
	{
		@EngineType = SolidBooster
	}

	!MODULE[ModuleGimbal],*{}

	!MODULE[ModuleEngineConfigs],*{}
	MODULE
	{
		name = ModuleFuelTanks
		volume = 2140.22414
		type = PSPC
		basemass = -1
		TANK
		{
		  name = PSPC
		  amount = 2068.96552
		  maxAmount = 2068.96552
		}
	}
	MODULE
	{
		name = ModuleEngineConfigs
		type = ModuleEngines
		configuration = Castor-2
		modded = false

		CONFIG
		{
			name = Castor-2
			minThrust = 330
			maxThrust = 330
			heatProduction = 100

			PROPELLANT
			{
				name = PSPC
				ratio = 1.0
				DrawGauge = True
			}

			atmosphereCurve
			{
				key = 0 282.2
				key = 1 260 // guess
			}

			curveResource = PSPC

			// guesses (note: max is above nominal * thrust_curve_max)

			chamberNominalTemp  = 1600
			maxEngineTemp = 1850

			thrustCurve // 49.41
			{
				key = 1.0       0.60606	3.0656		0
				key = 0.98122   0.54545 0			3.40523
				key = 0.94563   0.54545 -1.70277	0
				key = 0.91974   0.58788 -1.57991	-1.58006
				key = 0.89192   0.6303  -1.47358	-1.47369
				key = 0.86217   0.67273 -1.38066	-1.38075
				key = 0.83047   0.71515 -1.29876	-1.29883
				key = 0.79684   0.75758 -0.87574	-1.22609
				key = 0.7525    0.79545 -0.83404	-0.83407
				key = 0.70601   0.83333 -0.79613	-0.79615
				key = 0.65735   0.87121 -0.76152	-0.76154
				key = 0.60652   0.90909 -0.30651	-0.72981
				key = 0.53145   0.93182 -0.29904	-0.29904
				key = 0.45452   0.95455 -0.29192	-0.29192
				key = 0.37574   0.97727 -0.28513	-0.28513
				key = 0.29511   1.0     0.5573		-0.27865
				key = 0.24156   0.9697  0.57472		0.57471
				key = 0.18965   0.93939 0.59326		0.59325
				key = 0.1394    0.90909 0			0.61303
				key = 0.05042   0.90909 0			0
				key = 0.02076   0.90909 27.64255	0
				key = 0.01418   0.70455 35.76961	35.52281
				key = 0.00927   0.5     51.00984	49.91142
				key = 0.00602   0.29545 97.47594	83.43789
				key = 0.00445   0.09091 10.59559	234.93048
				key = 0.00111   0.04545 24.52714	19.67752
				key = 0.0       0.01    0       	65.28863
			}
		}
	}

	!MODULE[ModuleAlternator],*{}

  !RESOURCE,*{}
}

@PART[*]:HAS[@MODULE[ModuleEngineConfigs]:HAS[@CONFIG[Castor-2]],!MODULE[TestFlightInterop]]:BEFORE[zTestFlight]
{
	TESTFLIGHT
	{
		name = Castor-2
		ratedBurnTime = 39
		ignitionReliabilityStart = 0.945
		ignitionReliabilityEnd = 0.997
		cycleReliabilityStart = 0.965
		cycleReliabilityEnd = 0.9985
		techTransfer = Castor-1:50
		reliabilityDataRateMultiplier = 2
		isSolid = True
	}
}
